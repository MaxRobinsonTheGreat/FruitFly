{"code":"!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&n&&\"string\"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p=\"\",t(t.s=0)}([function(e,n,t){\"use strict\";const o=t(!function(){var e=new Error(\"Cannot find module '~/src/shared/game_core'\");throw e.code=\"MODULE_NOT_FOUND\",e}()),i=t(!function(){var e=new Error(\"Cannot find module '~/src/client/renderer/sprite'\");throw e.code=\"MODULE_NOT_FOUND\",e}()),r=t(!function(){var e=new Error(\"Cannot find module '~/src/shared/player'\");throw e.code=\"MODULE_NOT_FOUND\",e}());t(!function(){var e=new Error(\"Cannot find module '/rendering/image_container'\");throw e.code=\"MODULE_NOT_FOUND\",e}()).getImageContainer();var c=60,a=0,l=0,s=new r;s.sprite=new i(\"Alien\",s.dimensions,2);var d,u=[],f=-1,m=0,v=0,p=[],y=100,g=0,h=!1,w=io.connect();function x(e,n){let t=d.state.locations[e],o=p[0].state.locations[e],i=p[0].timestamp-d.timestamp;0!==i&&(u[e].location.x+=(o.x-t.x)/i*(n-y-d.timestamp),u[e].location.y+=(o.y-t.y)/i*(n-y-d.timestamp))}function O(e){if(u.length!==e.locations.length)for(var n in u=[],e.locations){u.push({location:e.locations[n],dimensions:o.getDimensionsObj(100,50)});var t=new i(\"Person\",u[n].dimensions,.5);u[n].sprite=t}else for(var n in u)u[n].location=e.locations[n];f=e.self_index}function _(e,n){ctx.fillStyle=n,ctx.fillRect(e.location.x,e.location.y,e.dimensions.w,e.dimensions.l)}w.on(\"connect\",function(e){document.addEventListener(\"keydown\",E),document.addEventListener(\"keyup\",j),m=Date.now(),setInterval(function(){v=Date.now()-m,m=Date.now(),function(){var e=s.move(v);o.anyIntersect(s,u,f)&&(s.location=e);var n=o.checkBoundry(s.location,s.dimensions);s.location=n.loc,s.setOrientation(a,l)}(),function(){if(void 0===d||void 0===p)return;if(O(d.state),0===p.length)return;let e=Date.now();for(var n in u){if(n>=p[0].state.locations.length)break;if(n!=f)x(n,e);else{var t=p[p.length-1].state.self_index;u[n].location=p[p.length-1].state.locations[t]}}for(;p.length>0&&e-p[0].timestamp>=y;)d=p.shift()}(),w.emit(\"move\",{loc:s.location,cc:g}),function(){for(var e in ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),_(s,\"blue\"),s.sprite.drawDirectional(s.location.x,s.location.y,s.orientation),u)(e!=f||h&&e<u.length)&&(_(u[e],\"red\"),u[e].sprite.draw(u[e].location.x,u[e].location.y));ctx.beginPath(),ctx.moveTo(s.center.x,s.center.y),ctx.lineTo(a,l),ctx.stroke()}(ctx)},1e3/c),w.emit(\"init_client\",s.location)}),w.on(\"all\",function(e){void 0===d?(O(e),d={state:e,timestamp:Date.now()}):p.push({state:e,timestamp:Date.now()})}),w.on(\"correction\",function(e){e.cc===g&&(s.location=e.corrected_location,g++)});const b=87,D=83,C=65,k=68;function E(e){e.preventDefault(),e.keyCode===C&&(s.commands.left=!0),e.keyCode===k&&(s.commands.right=!0),e.keyCode===b&&(s.commands.up=!0),e.keyCode===D&&(s.commands.down=!0)}function j(e){e.preventDefault(),e.keyCode===C&&(s.commands.left=!1),e.keyCode===k&&(s.commands.right=!1),e.keyCode===b&&(s.commands.up=!1),e.keyCode===D&&(s.commands.down=!1)}$(\"body\").mousemove(function(e){var n=canvas.getBoundingClientRect();a=e.clientX-n.left,l=e.clientY-n.top})}]);","extractedComments":[]}